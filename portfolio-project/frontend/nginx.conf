server {
    # 컨테이너 내부에서 80번 포트를 사용합니다.
    listen 80;

    # Vue.js 빌드 결과물(정적 파일)이 위치한 경로를 지정합니다.
    # 이 경로는 frontend/Dockerfile에서 파일을 복사해 넣는 위치와 일치해야 합니다.
    root /usr/share/nginx/html;

    # 기본적으로 index.html 파일을 찾습니다.
    index index.html;

    # --- Vue Router를 위한 핵심 설정 ---
    location / {
        # 1. 요청된 URI($uri)와 일치하는 파일이 있는지 확인합니다. (예: /assets/logo.png)
        # 2. 파일이 없다면, 해당 URI가 폴더($uri/)인지 확인합니다.
        # 3. 둘 다 아니라면, 모든 요청을 /index.html 로 보냅니다.
        #    이렇게 하면 Vue 앱이 로드되고, Vue Router가 /post/1 과 같은 경로를
        #    인식하여 올바른 컴포넌트를 렌더링하게 됩니다.
        try_files $uri $uri/ /index.html;
    }
}

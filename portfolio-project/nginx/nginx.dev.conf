server {
    # 1. 80번 포트(HTTP)로 들어오는 요청을 받도록 설정합니다.
    listen 80;
    
    # 2. 로컬 환경에서 접속할 주소로 'localhost'를 지정합니다.
    server_name localhost;

    # 3. HTTPS 강제 리디렉션과 SSL 관련 설정은 모두 제거합니다.
    #    기존 443 포트 설정에 있던 핵심 로직만 남깁니다.

    # 프론트엔드 서비스로 프록시
    location / {
        proxy_pass http://frontend:80;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }

    # '/api'로 시작하는 모든 요청은 백엔드 API 서버로 전달합니다.
    location /api {
        proxy_pass http://backend:8000;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }

    # '/static'으로 시작하는 요청도 백엔드 서버로 전달합니다.
    location /static {
        proxy_pass http://backend:8000;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
}